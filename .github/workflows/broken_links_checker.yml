# Generated by Project Keeper
# https://github.com/exasol/project-keeper/blob/main/project-keeper/src/main/resources/templates/.github/workflows/broken_links_checker.yml
name: Broken Links Checker

on:
  schedule:
    - cron: "0 5 * * 0"

jobs:
  linkChecker:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    defaults:
      run:
        shell: "bash"
    concurrency:
      group: ${{ github.workflow }}-${{ github.ref }}
      cancel-in-progress: true
    steps:
      - uses: actions/checkout@v4
      - name: Configure broken links checker
        run: |
          mkdir -p ./target
          echo '{"aliveStatusCodes": [429, 200], "ignorePatterns": [' \
               '{"pattern": "^https?://(www|dev).mysql.com/"},' \
               '{"pattern": "^https?://(www.)?opensource.org"}' \
               '{"pattern": "^https?://(www.)?eclipse.org"}' \
               '{"pattern": "^https?://projects.eclipse.org"}' \
               ']}' > ./target/broken_links_checker.json
      - uses: gaurav-nelson/github-action-markdown-link-check@v1
        with:
          use-quiet-mode: "yes"
          use-verbose-mode: "yes"
          config-file: ./target/broken_links_checker.json
